@page "/Other-tables"
@inject ITitleGeneratorService TitleGenerator
@inject IJSRuntime JSRuntime

<PageTitle>Other Tables</PageTitle>
<link href="css/app.css" rel="stylesheet" />

<h1>Others</h1>

@if (!string.IsNullOrEmpty(generatedTitle))
{
    <div class="text-container">
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">artifact_descriptors_and_conditions</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">location_choice_and_atmosphere</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">Building type</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">military_or_otherworldly_sites</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">knowledge_or_person_objectives</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">rural_or_marine_locations</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">ancient_or_otherworldly_creature</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">legendary_character</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">legendary_artifact</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">hazards</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">hazard_difficulties</p>
        <p class="generated-text" style="font-size: 15px; line-height: 1.6">displays_of_might_and_power</p>
    </div>
}

<div class="bottom-container">
    <div class="tooltip-container">
        <input type="checkbox" id="choose-option-checkbox" name="choose-option-checkbox" @bind="randomizeOptions">
        <label for="choose-option-checkbox">Randomize options</label>
        <span class="tooltip">Check this box to randomize the generated options. E.g., Disabled: Jewel/Gem/Amulet.  Enabled: Gem.</span>
    </div>
</div>

<button @ref="buttonElement" @onclick="Generate" class="btn-primary generate-title">Generate Title</button>


@code {
    private string generatedTitle;
    private bool randomizeOptions = false;
    private ElementReference buttonElement;

    private async Task Generate()
    {
        generatedTitle = await TitleGenerator.GenerateTitle(randomizeOptions);
        await UnfocusButton();
    }

    private async Task UnfocusButton()
    {
        await JSRuntime.InvokeVoidAsync("unfocusElement", buttonElement);
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("eval", @"
                window.unfocusElement = function(element) {
                    element.blur();
                }
            ");
        }
    }
}